<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exemple d'utilisation de check-login-redirect</title>
  <!-- Lit Element -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/lit@2.0.0/+esm"></script>
  <!-- Configuration Parse -->
  <script src="./parse-credentials.js"></script>
  <!-- Composant check-login-redirect -->
  <script type="module" src="./check-login-redirect.js"></script>
</head>
<body>
  <h1>Page de login avec redirection automatique</h1>
  
  <!-- Le composant check-login-redirect vérifie automatiquement si l'utilisateur est déjà connecté -->
  <check-login-redirect></check-login-redirect>
  
  <p>Si vous voyez ce contenu, c'est que vous n'êtes pas connecté.</p>
  
  <div>
    <h2>Tester la redirection</h2>
    <button onclick="addFakeToken()">Ajouter un token fictif et recharger</button>
    <button onclick="removeToken()">Supprimer le token</button>
  </div>
  
  <script>
    function addFakeToken() {
      localStorage.setItem('parseSessionToken', 'fake-token-for-testing');
      localStorage.setItem('parseUsername', 'test-user');
      alert('Token fictif ajouté. La page va se recharger et vous serez redirigé.');
      window.location.reload();
    }
    
    function removeToken() {
      localStorage.removeItem('parseSessionToken');
      localStorage.removeItem('parseUsername');
      sessionStorage.removeItem('parseSessionToken');
      sessionStorage.removeItem('parseUsername');
      alert('Token supprimé. Vous pouvez maintenant voir la page de login.');
    }
  </script>
</body>
</html>